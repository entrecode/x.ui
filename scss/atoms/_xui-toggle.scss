/// @author Bernhard Ruoff
/// @since 9.1.2
/// @access public
/// @group atoms

// scss-lint:disable NestingDepth
// @param {color} $input-toggle-background [flattenColor(getColor(minor))]
// @param {color} $input-toggle-hover-background [etHover($xui-toggle-background)]
// @param {color} $input-toggle-active-background [$link)]
// @param {px} $input-toggle-height [$root-size]
// @param {color} $input-toggle-width [$xui-toggle-height * 1.75]
// @param {color} $xui-toggle-radius [$xui-toggle-height / 2]
// @param {array} $xui-toggle-style

%toggle {
  cursor: pointer;
  direction: ltr;
  display: inline-block;
  @include inject-style($xui-toggle-style);
  background: $xui-toggle-background;
  border-radius: arrayMagic($xui-toggle-radius);
  height: rem($xui-toggle-height);
  width: rem($xui-toggle-width);
  transition: background-color 0.2s;

  // @param {color} $input-toggle-pin-background [flattenColor(getColor(minor))]
  // @param {px} $input-toggle-pin-height [$root-size]
  // @param {px} $input-toggle-pin-width [$xui-toggle-height * 1.75]
  // @param {px} $xui-toggle-pin-radius [$xui-toggle-height / 2]
  // @param {array} $xui-toggle-spacing [$form-group-spacing]
  // @param {array} $xui-toggle-pin-style
  $_pin-spacing-h: ($xui-toggle-height - $xui-toggle-pin-height) / 2;
  $_pin-spacing-v: (($xui-toggle-width / 2) - $xui-toggle-pin-width) / 2;

  &::after {
    content: '';
    display: block;
    @include inject-style($xui-toggle-pin-style);
    background: $xui-toggle-pin-background;
    border-radius: arrayMagic($xui-toggle-pin-radius);
    height: rem($xui-toggle-pin-height);
    width: rem($xui-toggle-pin-width);
    margin: arrayMagic($_pin-spacing-h $_pin-spacing-v);
  }
}

%toggle-is-active {
  direction: rtl;
  background: $xui-toggle-active-background;
}

.xui-toggle {
  min-height: rem($input-min-height);
  margin: arrayMagic($xui-toggle-spacing);

  @supports (display: flex) {
    display: flex;
    align-items: center;
  }

  &:hover {
    .xui-toggle__switch {
      background: $xui-toggle-hover-background;
    }
  }

  [type='radio'],
  [type='checkbox'] {
    @extend %is-hidden-input;

    &:checked {
      + label .xui-toggle__switch {
        @extend %toggle-is-active;
      }

      + label.xui-toggle__switch {
        @extend %toggle-is-active;
      }
    }
  }

  // @param {px} $xui-toggle-label-size [base-font-size]
  // @param {px} $xui-toggle-line-height [$xui-toggle-label-size * $base-line-height]
  .xui-toggle__switch {
    @extend %toggle;
    margin-top: rem(($xui-toggle-line-height - $xui-toggle-height) / 2);
  }

  label {
    cursor: pointer;
    display: flex;
    user-select: none;
    margin: 0;
    font-size: em($xui-toggle-label-size);
    line-height: em($xui-toggle-line-height, $xui-toggle-label-size);

    .xui-toggle__switch {
      margin-right: rem(8);
    }
  }
}
